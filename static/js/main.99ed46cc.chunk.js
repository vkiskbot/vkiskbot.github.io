(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){},139:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},140:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);a(72),a(97);var s=a(0),n=a.n(s),r=a(33),o=a.n(r),l=a(18),i=a.n(l),c=a(35),h=a(62),u=a(63),d=a(69),m=a(64),v=a(70),p=a(8),_=a(1),y=(a(119),a(120),a(121),a(65)),E=a.n(y),b=(a(122),a(123),a(34),a(23),a(124),a(66)),g=a.n(b),w=(a(125),a(67)),f=a.n(w),S=(a(126),a(127),a(68)),k=a.n(S),I=(a(59),a(138),a(139),a(140),Object(_.platform)(),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).go=function(e){a.setState({activePanel:e.currentTarget.dataset.to})},a.state={activePanel:"main",vkid:"",top_list:"",question:"",answers:"",cur_answer:"",cur_header:"",score:0,firststarted:"none",var1:"",var2:"",var3:"",var4:"",hash_var1:"",hash_var2:"",hash_var3:"",hash_var4:"",main_hash:"",fetchedUser:null,activeStory:"main",img_pic:""},a.onStoryChange=a.onStoryChange.bind(Object(p.a)(Object(p.a)(a))),a.checkvar=a.checkvar.bind(Object(p.a)(Object(p.a)(a))),a.closePopout=a.closePopout.bind(Object(p.a)(Object(p.a)(a))),a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"closePopout",value:function(){this.setState({popout:null})}},{key:"gettop",value:function(){var e=this,t={action:"get_top",vkid:this.state.vkid},a=new FormData;a.append("json",JSON.stringify(t)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:a}).then(function(t){200===t.status&&t.json().then(function(t){"Y"==t.success&&e.setState({top_list:t.top.vk})})})}},{key:"checkvar",value:function(e,t){var a=this;if("start"!==e){var s={action:"check_answer",vkid:this.state.vkid,main_hash:this.state.main_hash,answer_hash:e},r=new FormData;r.append("json",JSON.stringify(s)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:r}).then(function(t){200===t.status&&t.json().then(function(t){"Y"==t.success?(a.setState({cur_answer:t.answer_full}),a.setState({cur_header:t.answ_header}),"Y"==t.answer_good?(document.getElementById(e).style.borderColor="green",document.getElementById(e).style.borderWidth="thick",document.getElementById(e).disabled=!0):(document.getElementById(e).style.borderColor="red",document.getElementById(e).style.borderWidth="thick",document.getElementById(e).disabled=!1),a.state.hash_var1!==e&&a.setState({hash_var1:""}),a.state.hash_var2!==e&&a.setState({hash_var2:""}),a.state.hash_var3!==e&&a.setState({hash_var3:""}),a.state.hash_var4!==e&&a.setState({hash_var4:""})):a.setState({popout:n.a.createElement(_.Alert,{actions:[{title:"OK",autoclose:!0}],onClose:a.closePopout},n.a.createElement("h3",null,t.err_header),t.answer_full)})})})}}},{key:"get_question",value:function(){var e=this;e.setState({cur_answer:""}),e.setState({cur_header:""});var t={action:"get_question",vkid:this.state.vkid},a=new FormData;a.append("json",JSON.stringify(t)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:a}).then(function(t){200===t.status&&t.json().then(function(t){if("Y"==t.success){e.setState({img_pic:t.url}),e.setState({var1:t.answers[0].var1}),e.setState({var2:t.answers[1].var2}),e.setState({var3:t.answers[2].var3}),e.setState({var4:t.answers[3].var4}),e.setState({hash_var1:t.answers[0].hash_var1}),e.setState({hash_var2:t.answers[1].hash_var2}),e.setState({hash_var3:t.answers[2].hash_var3}),e.setState({hash_var4:t.answers[3].hash_var4}),e.setState({main_hash:t.main_hash}),e.setState({score:t.score});try{document.getElementById(t.answers[0].hash_var1).style.borderColor="",document.getElementById(t.answers[0].hash_var1).style.borderWidth="",document.getElementById(t.answers[0].hash_var1).disabled=!1,document.getElementById(t.answers[1].hash_var2).style.borderColor="",document.getElementById(t.answers[1].hash_var2).style.borderWidth="",document.getElementById(t.answers[1].hash_var2).disabled=!1,document.getElementById(t.answers[2].hash_var3).style.borderColor="",document.getElementById(t.answers[2].hash_var3).style.borderWidth="",document.getElementById(t.answers[2].hash_var3).disabled=!1,document.getElementById(t.answers[3].hash_var4).style.borderColor="",document.getElementById(t.answers[3].hash_var4).style.borderWidth="",document.getElementById(t.answers[3].hash_var4).disabled=!1}catch(a){}}})})}},{key:"onStoryChange",value:function(e){"top"===e.currentTarget.dataset.story&&this.gettop(),this.setState({activeStory:e.currentTarget.dataset.story}),"top"!=e.currentTarget.dataset.story&&window.scrollTo(0,0),"lk "==e.currentTarget.dataset.story&&window.scrollTo(0,0),"top"===this.state.activeStory&&"lk"===e.currentTarget.dataset.story&&window.scrollTo(0,0),"oferta"===this.state.activeStory&&"top"===e.currentTarget.dataset.story&&window.scrollTo(300,300),"pricelist"===this.state.activeStory&&"top"===e.currentTarget.dataset.story&&window.scrollTo(0,0)}},{key:"componentDidMount",value:function(){var e=this;i.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data}),e.setState({vkid:t.detail.data.id}),e.get_question()}}),i.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){var e,t=this,a=Array.from(this.state.top_list);return n.a.createElement(_.Epic,{activeStory:this.state.activeStory,tabbar:"oferta"!==this.state.activeStory&&"off"!==this.state.activeStory&&n.a.createElement(_.Tabbar,null,n.a.createElement(_.TabbarItem,{onClick:this.onStoryChange,selected:"main"===this.state.activeStory,"data-story":"main",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},n.a.createElement(E.a,null)),n.a.createElement(_.TabbarItem,{onClick:this.onStoryChange,selected:"game"===this.state.activeStory,"data-story":"game",text:"\u0418\u0433\u0440\u0430"},n.a.createElement(f.a,null)),n.a.createElement(_.TabbarItem,{onClick:this.onStoryChange,selected:"top"===this.state.activeStory,"data-story":"top",text:"\u0422\u041e\u041f"},n.a.createElement(k.a,null)))},n.a.createElement(_.View,(e={id:"main",activePanel:"main"},Object(c.a)(e,"activePanel",this.state.activePanel),Object(c.a)(e,"popout",this.state.popout),e),n.a.createElement(_.Panel,{id:"main"},n.a.createElement(_.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),n.a.createElement(_.Group,{title:""},n.a.createElement(_.Div,null,n.a.createElement("b",null,"\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434 - \u0440\u0430\u0437\u0432\u0438\u0432\u0430\u044e\u0449\u0438\u0439 \u0441\u0435\u0440\u0432\u0438\u0441"))),n.a.createElement(_.Group,{title:"\u041c\u0438\u0441\u0441\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430"},n.a.createElement(_.Div,null,n.a.createElement(_.InfoRow,{title:""},'\u0418\u0433\u0440\u043e\u0432\u043e\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 "\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434" - \u044d\u0442\u043e \u043f\u0440\u0435\u0432\u043e\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0445 \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u043e\u0432. \u041d\u0430\u0448 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435 \u043e\u0431\u0449\u0435\u0439 \u044d\u0440\u0443\u0434\u0438\u0446\u0438\u0438 \u043b\u044e\u0434\u0435\u0439 \u0432 \u043b\u0435\u0433\u043a\u043e\u0439 \u0438\u0433\u0440\u043e\u0432\u043e\u0439 \u0444\u043e\u0440\u043c\u0435. \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u0430\u044f \u043c\u0438\u043d\u0443\u0442\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0442\u0440\u0430\u0442\u0438\u0442\u044c \u0435\u0451 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0439 \u0434\u043b\u044f \u0441\u0435\u0431\u044f.'))),n.a.createElement(_.Group,{title:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0438\u0433\u0440\u044b:"},n.a.createElement(_.Div,null,n.a.createElement(_.InfoRow,{title:""},"\u0421\u0435\u0440\u0432\u0438\u0441 \u0432\u0430\u043c \u043f\u043e\u043a\u0430\u0436\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u0443 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0433\u043e \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u0430 \u0438 4 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u043e\u0442\u0432\u0435\u0442\u043e\u0432 (\u0430\u0432\u0442\u043e\u0440\u043e\u0432 \u043a\u0430\u0440\u0442\u0438\u043d\u044b). \u0412\u0430\u043c \u043d\u0430\u0434\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u0437 \u043d\u0438\u0445. \u0415\u0441\u043b\u0438 \u0432\u0430\u0448 \u043e\u0442\u0432\u0435\u0442 \u043e\u043a\u0430\u0437\u0430\u043b\u0441\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c, \u0432\u0430\u043c \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442 5 \u0431\u0430\u043b\u043b\u043e\u0432 \u0438 \u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043a\u0430\u0436\u0435\u0442 \u0442\u0430\u043a \u0436\u0435  \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u0435\u0440\u0432\u0438\u0441 \u0432\u0430\u043c \u0441\u043a\u0430\u0436\u0435\u0442 \u043a\u0442\u043e \u0430\u0432\u0442\u043e\u0440 \u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b. \u041d\u0430 \u043e\u0442\u0432\u0435\u0442 \u0434\u0430\u0435\u0442\u0441\u044f 10 \u043c\u0438\u043d\u0443\u0442, \u0434\u0430\u043b\u0435\u0435 \u043e\u0442\u0432\u0435\u0442 \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442\u0441\u044f."))),n.a.createElement(_.Group,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u041f\u041e:"},n.a.createElement(_.Div,null,n.a.createElement(_.InfoRow,{title:""},"1.1.01"))),n.a.createElement(_.Group,null,n.a.createElement(_.Div,null,n.a.createElement(_.Button,{size:"xl",level:"2",onClick:this.onStoryChange,selected:"game"===this.state.activeStory,"data-story":"game"},"\u041f\u043e\u0433\u043d\u0430\u043b\u0438 \u0438\u0433\u0440\u0430\u0442\u044c!"))))),n.a.createElement(_.View,{id:"game",activePanel:"game",popout:this.state.popout},n.a.createElement(_.Panel,{id:"game"},n.a.createElement(_.PanelHeader,null,n.a.createElement(_.PanelHeaderContent,{status:"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: "+this.state.score},"\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434")),n.a.createElement(_.Div,null,n.a.createElement("img",{className:"Imgpic",src:this.state.img_pic}),n.a.createElement(_.Group,null,n.a.createElement(_.Div,{id:"answer"},this.state.cur_header,n.a.createElement("br",null),this.state.cur_answer),n.a.createElement(_.FormLayout,null,this.state.hash_var1&&n.a.createElement(_.Button,{id:this.state.hash_var1,size:"xl",level:"2",onClick:function(e){return t.checkvar(t.state.hash_var1,e)}},this.state.var1),this.state.hash_var2&&n.a.createElement(_.Button,{id:this.state.hash_var2,size:"xl",level:"2",onClick:function(e){return t.checkvar(t.state.hash_var2,e)}},this.state.var2),this.state.hash_var3&&n.a.createElement(_.Button,{id:this.state.hash_var3,size:"xl",level:"2",onClick:function(e){return t.checkvar(t.state.hash_var3,e)}},this.state.var3),this.state.hash_var4&&n.a.createElement(_.Button,{id:this.state.hash_var4,size:"xl",level:"2",onClick:function(e){return t.checkvar(t.state.hash_var4,e)}},this.state.var4)),this.state.cur_answer&&n.a.createElement(_.Div,{style:{}},n.a.createElement(_.Button,{id:"next_q",size:"xl",level:"2",onClick:function(e){return t.get_question()}},"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")))))),n.a.createElement(_.View,{id:"top",activePanel:"top",popout:this.state.popout},n.a.createElement(_.Panel,{id:"top"},n.a.createElement(_.PanelHeader,null,"\u0422\u041e\u041f"),n.a.createElement(_.Group,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0438\u0433\u0440\u043e\u043a\u043e\u0432"},console.log("toplist_array",a),console.log("toplist",this.state.top_list),a.length>0&&n.a.createElement(_.List,null,a.map(function(e,t){return n.a.createElement(_.Cell,{before:n.a.createElement(_.Avatar,null,n.a.createElement(g.a,null)),indicator:n.a.createElement(_.Counter,{type:"primary"},e.TOP)}," ",e.fname," ",e.lname," ")}))))))}}]),t}(n.a.Component));i.a.send("VKWebAppInit",{}),o.a.render(n.a.createElement(I,null),document.getElementById("root"))},71:function(e,t,a){e.exports=a(141)}},[[71,1,2]]]);
//# sourceMappingURL=main.99ed46cc.chunk.js.map