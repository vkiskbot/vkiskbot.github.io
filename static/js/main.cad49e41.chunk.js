(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(t,e,a){},139:function(t,e,a){t.exports=a.p+"static/media/persik.4e1ec840.png"},140:function(t,e,a){},141:function(t,e,a){"use strict";a.r(e);a(72),a(97);var r=a(0),s=a.n(r),n=a(33),o=a.n(n),i=a(17),l=a.n(i),c=a(35),h=a(62),u=a(63),v=a(69),d=a(64),m=a(70),p=a(7),_=a(1),y=(a(119),a(120),a(121),a(65)),S=a.n(y),b=(a(122),a(123),a(34),a(23),a(124),a(66)),f=a.n(b),E=(a(125),a(67)),w=a.n(E),g=(a(126),a(127),a(68)),k=a.n(g),P=(a(59),a(138),a(139),a(140),Object(_.platform)(),function(t){function e(t){var a;return Object(h.a)(this,e),(a=Object(v.a)(this,Object(d.a)(e).call(this,t))).checkInternet=function(){var t=a.state.status;t=window.navigator.onLine?"online":"offline",a.setState({status:t}),"offline"===t?a.setState({activePanel:"off",activeStory:"off"}):"online"===t&&"off"===a.state.activePanel&&a.setState({activePanel:"main",activeStory:"main"})},a.go=function(t){a.setState({activePanel:t.currentTarget.dataset.to}),a.setState({activePanel:t.currentTarget.dataset.to,activeStory:t.currentTarget.dataset.to}),window.history.pushState({panel:t.currentTarget.dataset.to},"".concat(t.currentTarget.dataset.to))},a.state={activePanel:"main",vkid:"",top_list:"",question:"",answers:"",cur_answer:"",cur_header:"",score:0,firststarted:"none",color_var1:"",color_var2:"",color_var3:"",color_var4:"",var1:"",var2:"",var3:"",var4:"",hash_var1:"",hash_var2:"",hash_var3:"",hash_var4:"",main_hash:"",fetchedUser:null,activeStory:"main",img_pic:""},a.onStoryChange=a.onStoryChange.bind(Object(p.a)(Object(p.a)(a))),a.checkvar=a.checkvar.bind(Object(p.a)(Object(p.a)(a))),a.closePopout=a.closePopout.bind(Object(p.a)(Object(p.a)(a))),a.closePopoutNewQ=a.closePopoutNewQ.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(e,t),Object(u.a)(e,[{key:"closePopout",value:function(){this.setState({popout:null})}},{key:"closePopoutNewQ",value:function(){this.setState({popout:null}),this.get_question()}},{key:"gettop",value:function(){var t=this,e={action:"get_top",vkid:this.state.vkid},a=new FormData;a.append("json",JSON.stringify(e)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:a}).then(function(e){200===e.status&&e.json().then(function(e){"Y"==e.success&&t.setState({top_list:e.top.vk})})})}},{key:"checkvar",value:function(t,e){var a=this;if("start"!==t){var r={action:"check_answer",vkid:this.state.vkid,main_hash:this.state.main_hash,answer_hash:t},n=new FormData;n.append("json",JSON.stringify(r)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:n}).then(function(e){200===e.status&&e.json().then(function(e){"Y"==e.success?(a.setState({cur_answer:e.answer_full}),a.setState({cur_header:e.answ_header}),"Y"==e.answer_good?(t==a.state.hash_var1&&a.setState({color_var1:"green"}),t==a.state.hash_var2&&a.setState({color_var2:"green"}),t==a.state.hash_var3&&a.setState({color_var3:"green"}),t==a.state.hash_var4&&a.setState({color_var4:"green"}),a.setState({score:e.score})):(t==a.state.hash_var1&&a.setState({color_var1:"red"}),t==a.state.hash_var2&&a.setState({color_var2:"red"}),t==a.state.hash_var3&&a.setState({color_var3:"red"}),t==a.state.hash_var4&&a.setState({color_var4:"red"})),a.state.hash_var1!==t&&a.setState({hash_var1:""}),a.state.hash_var2!==t&&a.setState({hash_var2:""}),a.state.hash_var3!==t&&a.setState({hash_var3:""}),a.state.hash_var4!==t&&a.setState({hash_var4:""})):a.setState({popout:s.a.createElement(_.Alert,{actions:[{title:"OK",autoclose:!0}],onClose:a.closePopoutNewQ},s.a.createElement("h3",null,e.err_header),e.answer_full)})})})}}},{key:"get_question",value:function(t){var e=this;"start"!=t&&e.setState({activeStory:"spinner"}),e.setState({cur_answer:""}),e.setState({cur_header:""}),e.setState({color_var1:""}),e.setState({color_var2:""}),e.setState({color_var3:""}),e.setState({color_var4:""});var a={action:"get_question",vkid:this.state.vkid,sess:t},r=new FormData;r.append("json",JSON.stringify(a)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:r}).then(function(a){200===a.status&&a.json().then(function(a){if("Y"==a.success){e.setState({img_pic:a.url}),e.setState({var1:a.answers[0].var1}),e.setState({var2:a.answers[1].var2}),e.setState({var3:a.answers[2].var3}),e.setState({var4:a.answers[3].var4}),e.setState({hash_var1:a.answers[0].hash_var1}),e.setState({hash_var2:a.answers[1].hash_var2}),e.setState({hash_var3:a.answers[2].hash_var3}),e.setState({hash_var4:a.answers[3].hash_var4}),e.setState({main_hash:a.main_hash}),a.score>0&&e.setState({score:a.score});try{document.getElementById(a.answers[0].hash_var1).style.borderColor="",document.getElementById(a.answers[0].hash_var1).style.borderWidth="",document.getElementById(a.answers[1].hash_var2).style.borderColor="",document.getElementById(a.answers[1].hash_var2).style.borderWidth="",document.getElementById(a.answers[2].hash_var3).style.borderColor="",document.getElementById(a.answers[2].hash_var3).style.borderWidth="",document.getElementById(a.answers[3].hash_var4).style.borderColor="",document.getElementById(a.answers[3].hash_var4).style.borderWidth=""}catch(r){}"start"!=t&&e.setState({activeStory:"game"})}})})}},{key:"onStoryChange",value:function(t){"top"===t.currentTarget.dataset.story&&this.gettop(),this.setState({activeStory:t.currentTarget.dataset.story}),"top"!=t.currentTarget.dataset.story&&window.scrollTo(0,0),"lk "==t.currentTarget.dataset.story&&window.scrollTo(0,0),"top"===this.state.activeStory&&"lk"===t.currentTarget.dataset.story&&window.scrollTo(0,0),"oferta"===this.state.activeStory&&"top"===t.currentTarget.dataset.story&&window.scrollTo(300,300),"pricelist"===this.state.activeStory&&"top"===t.currentTarget.dataset.story&&window.scrollTo(0,0)}},{key:"menu",value:function(t){"oferta"===this.state.activeStory?(this.setState({activePanel:"order",activeStory:"order"}),window.history.pushState({panel:"order"},"order"),window.scrollTo(300,300)):"main"!==this.state.activeStory&&(t.state?this.setState({activePanel:t.state.panel,activeStory:t.state.panel}):(this.setState({activePanel:"main",activeStory:"main",search:""}),window.history.pushState({panel:"main"},"main")))}},{key:"componentDidMount",value:function(){var t=this;window.setInterval(this.checkInternet,500),window.addEventListener("popstate",function(e){return e.preventDefault()&t.menu(e)}),window.history.pushState({panel:"main"},"main"),l.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var a=document.createAttribute("scheme");a.value=e.detail.data.scheme?e.detail.data.scheme:"client_light",document.body.attributes.setNamedItem(a);break;case"VKWebAppGetUserInfoResult":t.setState({fetchedUser:e.detail.data}),t.setState({vkid:e.detail.data.id});var r={action:"check_user_in_group",vkid:e.detail.data.id},s=new FormData;s.append("json",JSON.stringify(r)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:s}).then(function(t){200===t.status&&t.json().then(function(t){"Y"==t.success&&"N"==t.in_group&&l.a.send("VKWebAppJoinGroup",{group_id:t.group_id})})}),t.get_question("start")}}),l.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){var t,e=this,a=Array.from(this.state.top_list);return s.a.createElement(_.Epic,{activeStory:this.state.activeStory,tabbar:"oferta"!==this.state.activeStory&&"off"!==this.state.activeStory&&s.a.createElement(_.Tabbar,null,s.a.createElement(_.TabbarItem,{onClick:this.onStoryChange,selected:"main"===this.state.activeStory,"data-story":"main",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},s.a.createElement(S.a,null)),s.a.createElement(_.TabbarItem,{onClick:this.onStoryChange,selected:"game"===this.state.activeStory,"data-story":"game",text:"\u0418\u0433\u0440\u0430"},s.a.createElement(w.a,null)),s.a.createElement(_.TabbarItem,{onClick:this.onStoryChange,selected:"top"===this.state.activeStory,"data-story":"top",text:"\u0422\u041e\u041f"},s.a.createElement(k.a,null)))},s.a.createElement(_.View,{id:"spinner",activePanel:"spinner"},s.a.createElement(_.Panel,{id:"spinner"},s.a.createElement(_.PanelHeader,null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445..."),s.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},s.a.createElement(_.Spinner,{size:"large",style:{marginTop:20}})))),s.a.createElement(_.View,(t={id:"main",activePanel:"main"},Object(c.a)(t,"activePanel",this.state.activePanel),Object(c.a)(t,"popout",this.state.popout),t),s.a.createElement(_.Panel,{id:"main"},s.a.createElement(_.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),s.a.createElement(_.Group,{title:""},s.a.createElement(_.Div,null,s.a.createElement("b",null,"\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434 - \u0440\u0430\u0437\u0432\u0438\u0432\u0430\u044e\u0449\u0438\u0439 \u0441\u0435\u0440\u0432\u0438\u0441"))),s.a.createElement(_.Group,{title:"\u041c\u0438\u0441\u0441\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430"},s.a.createElement(_.Div,null,s.a.createElement(_.InfoRow,{title:""},'\u0418\u0433\u0440\u043e\u0432\u043e\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 "\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434" - \u044d\u0442\u043e \u043f\u0440\u0435\u0432\u043e\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0445 \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u043e\u0432. \u041d\u0430\u0448 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435 \u043e\u0431\u0449\u0435\u0439 \u044d\u0440\u0443\u0434\u0438\u0446\u0438\u0438 \u043b\u044e\u0434\u0435\u0439 \u0432 \u043b\u0435\u0433\u043a\u043e\u0439 \u0438\u0433\u0440\u043e\u0432\u043e\u0439 \u0444\u043e\u0440\u043c\u0435. \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u0430\u044f \u043c\u0438\u043d\u0443\u0442\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0442\u0440\u0430\u0442\u0438\u0442\u044c \u0435\u0451 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0439 \u0434\u043b\u044f \u0441\u0435\u0431\u044f.'))),s.a.createElement(_.Group,{title:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0438\u0433\u0440\u044b:"},s.a.createElement(_.Div,null,s.a.createElement(_.InfoRow,{title:""},"\u0421\u0435\u0440\u0432\u0438\u0441 \u0432\u0430\u043c \u043f\u043e\u043a\u0430\u0436\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u0443 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0433\u043e \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u0430 \u0438 4 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u043e\u0442\u0432\u0435\u0442\u043e\u0432 (\u0430\u0432\u0442\u043e\u0440\u043e\u0432 \u043a\u0430\u0440\u0442\u0438\u043d\u044b). \u0412\u0430\u043c \u043d\u0430\u0434\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u0437 \u043d\u0438\u0445. \u0415\u0441\u043b\u0438 \u0432\u0430\u0448 \u043e\u0442\u0432\u0435\u0442 \u043e\u043a\u0430\u0437\u0430\u043b\u0441\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c, \u0432\u0430\u043c \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442 5 \u0431\u0430\u043b\u043b\u043e\u0432 \u0438 \u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043a\u0430\u0436\u0435\u0442 \u0442\u0430\u043a \u0436\u0435  \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u0435\u0440\u0432\u0438\u0441 \u0432\u0430\u043c \u0441\u043a\u0430\u0436\u0435\u0442 \u043a\u0442\u043e \u0430\u0432\u0442\u043e\u0440 \u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b. \u041d\u0430 \u043e\u0442\u0432\u0435\u0442 \u0434\u0430\u0435\u0442\u0441\u044f 10 \u043c\u0438\u043d\u0443\u0442, \u0434\u0430\u043b\u0435\u0435 \u043e\u0442\u0432\u0435\u0442 \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442\u0441\u044f."))),s.a.createElement(_.Group,{title:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b:"},s.a.createElement(_.Div,null,s.a.createElement(_.InfoRow,{title:""},"\u0413\u0440\u0443\u043f\u043f\u0430 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435: ",s.a.createElement("a",{style:{color:"#42648b"},target:"_blank",href:"https://vk.com/isk_bot"},"https://vk.com/isk_bot")))),s.a.createElement(_.Group,{title:"\u0412\u0435\u0440\u0441\u0438\u044f \u041f\u041e:"},s.a.createElement(_.Div,null,s.a.createElement(_.InfoRow,{title:""},"1.1.03"))),s.a.createElement(_.Group,null,s.a.createElement(_.Div,null,s.a.createElement(_.Button,{size:"xl",level:"2",onClick:this.onStoryChange,selected:"game"===this.state.activeStory,"data-story":"game"},"\u041f\u043e\u0433\u043d\u0430\u043b\u0438 \u0438\u0433\u0440\u0430\u0442\u044c!"))))),s.a.createElement(_.View,{id:"off",activePanel:this.state.activePanel,popout:this.state.popout},s.a.createElement(_.Panel,{id:"off"},s.a.createElement(_.PanelHeader,null,"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435"),s.a.createElement(_.Group,null,s.a.createElement(_.Div,{align:"center"},"Ooops... \u041f\u0440\u043e\u043f\u0430\u043b\u043e \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435.",s.a.createElement("br",null),"\u041a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e, \u043c\u044b \u043f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u043c \u0412\u0430\u0441 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443.")))),s.a.createElement(_.View,{id:"game",activePanel:"game",popout:this.state.popout},s.a.createElement(_.Panel,{id:"game"},s.a.createElement(_.PanelHeader,null,s.a.createElement(_.PanelHeaderContent,{status:"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: "+this.state.score},"\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434")),s.a.createElement(_.Div,null,s.a.createElement("img",{className:"Imgpic",src:this.state.img_pic}),s.a.createElement(_.Group,null,this.state.cur_header&&s.a.createElement(_.Div,{id:"answer"},this.state.cur_header,s.a.createElement("br",null),this.state.cur_answer),s.a.createElement(_.FormLayout,null,this.state.hash_var1&&s.a.createElement(_.Button,{disabled:!this.state.hash_var2,style:{borderColor:this.state.color_var1},id:this.state.hash_var1,size:"xl",level:"2",onClick:function(t){return e.checkvar(e.state.hash_var1,t)}},this.state.var1),this.state.hash_var2&&s.a.createElement(_.Button,{disabled:!this.state.hash_var1,style:{borderColor:this.state.color_var2},id:this.state.hash_var2,size:"xl",level:"2",onClick:function(t){return e.checkvar(e.state.hash_var2,t)}},this.state.var2),this.state.hash_var3&&s.a.createElement(_.Button,{disabled:!this.state.hash_var2,style:{borderColor:this.state.color_var3},id:this.state.hash_var3,size:"xl",level:"2",onClick:function(t){return e.checkvar(e.state.hash_var3,t)}},this.state.var3),this.state.hash_var4&&s.a.createElement(_.Button,{disabled:!this.state.hash_var2,style:{borderColor:this.state.color_var4},id:this.state.hash_var4,size:"xl",level:"2",onClick:function(t){return e.checkvar(e.state.hash_var4,t)}},this.state.var4)),this.state.cur_answer&&s.a.createElement(_.Div,{style:{}},s.a.createElement(_.Button,{id:"next_q",size:"xl",level:"2",onClick:function(t){return e.get_question()}},"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")))))),s.a.createElement(_.View,{id:"top",activePanel:"top",popout:this.state.popout},s.a.createElement(_.Panel,{id:"top"},s.a.createElement(_.PanelHeader,null,"\u0422\u041e\u041f"),s.a.createElement(_.Group,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0438\u0433\u0440\u043e\u043a\u043e\u0432"},a.length>0&&s.a.createElement(_.List,null,a.map(function(t,e){return s.a.createElement(_.Cell,{before:s.a.createElement(_.Avatar,{src:t.UF_PHOTO_200},""==t.UF_PHOTO_200?s.a.createElement(f.a,null):""," "),indicator:s.a.createElement(_.Counter,{type:"primary"},t.TOP)}," ",t.fname," ",t.lname," ")}))))))}}]),e}(s.a.Component));l.a.send("VKWebAppInit",{}),o.a.render(s.a.createElement(P,null),document.getElementById("root"))},71:function(t,e,a){t.exports=a(141)}},[[71,1,2]]]);
//# sourceMappingURL=main.cad49e41.chunk.js.map