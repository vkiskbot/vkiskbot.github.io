(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(t,e,a){},135:function(t,e,a){t.exports=a.p+"static/media/persik.4e1ec840.png"},136:function(t,e,a){},137:function(t,e,a){"use strict";a.r(e);a(72),a(97);var n=a(0),s=a.n(n),r=a(33),o=a.n(r),l=a(18),i=a.n(l),c=a(35),u=a(62),h=a(63),v=a(69),m=a(64),p=a(70),d=a(8),y=a(1),E=(a(119),a(65)),f=a.n(E),b=(a(120),a(66)),k=a.n(b),_=(a(121),a(122),a(34),a(23),a(123),a(67)),S=a.n(_),g=a(68),w=a.n(g),j=(a(59),a(134),a(135),a(136),Object(y.platform)(),function(t){function e(t){var a;return Object(u.a)(this,e),(a=Object(v.a)(this,Object(m.a)(e).call(this,t))).go=function(t){a.setState({activePanel:t.currentTarget.dataset.to})},a.state={activePanel:"main",vkid:"",top_list:"",question:"",answers:"",score:0,firststarted:"none",var1:"",var2:"",var3:"",var4:"",hash_var1:"",hash_var2:"",hash_var3:"",hash_var4:"",main_hash:"",fetchedUser:null,activeStory:"main",img_pic:""},a.onStoryChange=a.onStoryChange.bind(Object(d.a)(Object(d.a)(a))),a.checkvar=a.checkvar.bind(Object(d.a)(Object(d.a)(a))),a.closePopout=a.closePopout.bind(Object(d.a)(Object(d.a)(a))),a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"closePopout",value:function(){this.setState({popout:null})}},{key:"gettop",value:function(){var t=this,e={action:"get_top",vkid:this.state.vkid},a=new FormData;a.append("json",JSON.stringify(e)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:a}).then(function(e){200===e.status&&e.json().then(function(e){console.log("toplist_array_aj",e.top.vk),"Y"==e.success&&t.setState({top_list:e.top.vk})})})}},{key:"checkvar",value:function(t,e){var a=this;if("start"!==t){var n={action:"check_answer",vkid:this.state.vkid,main_hash:this.state.main_hash,answer_hash:t};(r=new FormData).append("json",JSON.stringify(n)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:r}).then(function(t){200===t.status&&t.json().then(function(t){"Y"==t.success?a.setState({popout:s.a.createElement(y.Alert,{actions:[{title:"OK",autoclose:!0}],onClose:a.closePopout},s.a.createElement("h3",null," \u041a\u0440\u0443\u0442\u043e, \u0432\u044b \u043f\u0440\u0430\u0432\u044b!"),t.answer_full)}):a.setState({popout:s.a.createElement(y.Alert,{actions:[{title:"OK",autoclose:!0}],onClose:a.closePopout},s.a.createElement("h3",null,t.err_header),t.answer_full)})})})}var r;n={action:"get_question",vkid:this.state.vkid};(r=new FormData).append("json",JSON.stringify(n)),fetch("https://zakupi.club/telegram_bot/bot_iskustvoved/ajax_isk.php",{method:"POST",body:r}).then(function(t){200===t.status&&t.json().then(function(t){"Y"==t.success&&(a.setState({img_pic:t.url}),a.setState({var1:t.answers[0].var1}),a.setState({var2:t.answers[1].var2}),a.setState({var3:t.answers[2].var3}),a.setState({var4:t.answers[3].var4}),a.setState({hash_var1:t.answers[0].hash_var1}),a.setState({hash_var2:t.answers[1].hash_var2}),a.setState({hash_var3:t.answers[2].hash_var3}),a.setState({hash_var4:t.answers[3].hash_var4}),a.setState({main_hash:t.main_hash}),a.setState({score:t.score}))})})}},{key:"onStoryChange",value:function(t){"top"===t.currentTarget.dataset.story&&this.gettop(),this.setState({activeStory:t.currentTarget.dataset.story}),"top"!=t.currentTarget.dataset.story&&window.scrollTo(0,0),"lk "==t.currentTarget.dataset.story&&window.scrollTo(0,0),"top"===this.state.activeStory&&"lk"===t.currentTarget.dataset.story&&window.scrollTo(0,0),"oferta"===this.state.activeStory&&"top"===t.currentTarget.dataset.story&&window.scrollTo(300,300),"pricelist"===this.state.activeStory&&"top"===t.currentTarget.dataset.story&&window.scrollTo(0,0)}},{key:"componentDidMount",value:function(){var t=this;i.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppGetUserInfoResult":t.setState({fetchedUser:e.detail.data}),t.setState({vkid:e.detail.data.id}),t.checkvar("start")}}),i.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){var t,e=this,a=Array.from(this.state.top_list);return s.a.createElement(y.Epic,{activeStory:this.state.activeStory,tabbar:"oferta"!==this.state.activeStory&&"off"!==this.state.activeStory&&s.a.createElement(y.Tabbar,null,s.a.createElement(y.TabbarItem,{onClick:this.onStoryChange,selected:"main"===this.state.activeStory,"data-story":"main",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"},s.a.createElement(k.a,null)),s.a.createElement(y.TabbarItem,{onClick:this.onStoryChange,selected:"game"===this.state.activeStory,"data-story":"game",text:"\u0418\u0433\u0440\u0430"},s.a.createElement(w.a,null)),s.a.createElement(y.TabbarItem,{onClick:this.onStoryChange,selected:"top"===this.state.activeStory,"data-story":"top",text:"\u0422\u041e\u041f"},s.a.createElement(f.a,null)))},s.a.createElement(y.View,(t={id:"main",activePanel:"main"},Object(c.a)(t,"activePanel",this.state.activePanel),Object(c.a)(t,"popout",this.state.popout),t),s.a.createElement(y.Panel,{id:"main"},s.a.createElement(y.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),s.a.createElement(y.Group,{title:""},s.a.createElement(y.Div,null,s.a.createElement("b",null,"\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434 - \u0440\u0430\u0437\u0432\u0438\u0432\u0430\u044e\u0449\u0438\u0439 \u0441\u0435\u0440\u0432\u0438\u0441"))),s.a.createElement(y.Group,{title:"\u041c\u0438\u0441\u0441\u0438\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u0430"},s.a.createElement(y.Div,null,s.a.createElement(y.InfoRow,{title:""},'\u0418\u0433\u0440\u043e\u0432\u043e\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 "\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434" - \u044d\u0442\u043e \u043f\u0440\u0435\u0432\u043e\u0441\u0445\u043e\u0434\u043d\u0430\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u044b \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0445 \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u043e\u0432. \u041d\u0430\u0448 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u043f\u043e\u0432\u044b\u0448\u0435\u043d\u0438\u0435 \u043e\u0431\u0449\u0435\u0439 \u044d\u0440\u0443\u0434\u0438\u0446\u0438\u0438 \u043b\u044e\u0434\u0435\u0439 \u0432 \u043b\u0435\u0433\u043a\u043e\u0439 \u0438\u0433\u0440\u043e\u0432\u043e\u0439 \u0444\u043e\u0440\u043c\u0435. \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u0430\u044f \u043c\u0438\u043d\u0443\u0442\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0442\u0440\u0430\u0442\u044c \u0435\u0451 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0439 \u0434\u043b\u044f \u0441\u0435\u0431\u044f.'))),s.a.createElement(y.Group,{title:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430 \u0438\u0433\u0440\u044b:"},s.a.createElement(y.Div,null,s.a.createElement(y.InfoRow,{title:""},"\u0421\u0435\u0440\u0432\u0438\u0441 \u0432\u0430\u043c \u043f\u043e\u043a\u0430\u0436\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u0443 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e\u0433\u043e \u0445\u0443\u0434\u043e\u0436\u043d\u0438\u043a\u0430 \u0438 4 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u043e\u0442\u0432\u0435\u0442\u043e\u0432 (\u0430\u0432\u0442\u043e\u0440\u043e\u0432 \u043a\u0430\u0440\u0442\u0438\u043d\u044b). \u0412\u0430\u043c \u043d\u0430\u0434\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u043e\u0434\u0438\u043d \u0438\u0437 \u043d\u0438\u0445. \u0415\u0441\u043b\u0438 \u0432\u0430\u0448 \u043e\u0442\u0432\u0435\u0442 \u043e\u043a\u0430\u0437\u0430\u043b\u0441\u044f \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c, \u0432\u0430\u043c \u043d\u0430\u0447\u0438\u0441\u043b\u044f\u0442 5 \u0431\u0430\u043b\u043b\u043e\u0432 \u0438 \u0441\u0435\u0440\u0432\u0438\u0441 \u043f\u043e\u043a\u0430\u0436\u0435\u0442 \u0442\u0430\u043a \u0436\u0435  \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u0435\u0440\u0432\u0438\u0441 \u0432\u0430\u043c \u0441\u043a\u0430\u0436\u0435\u0442 \u043a\u0442\u043e \u0430\u0432\u0442\u043e\u0440 \u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u044b. \u041d\u0430 \u043e\u0442\u0432\u0435\u0442 \u0434\u0430\u0435\u0442\u0441\u044f 10 \u043c\u0438\u043d\u0443\u0442, \u0434\u0430\u043b\u0435\u0435 \u043e\u0442\u0432\u0435\u0442 \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442\u0441\u044f."))),s.a.createElement(y.Group,null,s.a.createElement(y.Div,null,s.a.createElement(y.Button,{size:"xl",level:"2",onClick:this.onStoryChange,selected:"game"===this.state.activeStory,"data-story":"game"},"\u041f\u043e\u0433\u043d\u0430\u043b\u0438 \u0438\u0433\u0440\u0430\u0442\u044c!"))))),s.a.createElement(y.View,{id:"game",activePanel:"game",popout:this.state.popout},s.a.createElement(y.Panel,{id:"game"},s.a.createElement(y.PanelHeader,null,s.a.createElement(y.PanelHeaderContent,{status:"\u0412\u0430\u0448 \u0441\u0447\u0435\u0442: "+this.state.score},"\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e\u0432\u0435\u0434")),s.a.createElement(y.Div,null,s.a.createElement("img",{className:"Imgpic",src:this.state.img_pic}),s.a.createElement(y.Group,null,s.a.createElement(y.FormLayout,null,s.a.createElement(y.Button,{size:"xl",level:"2",onClick:function(t){return e.checkvar(e.state.hash_var1,t)}},this.state.var1),s.a.createElement(y.Button,{size:"xl",level:"2",onClick:function(t){return e.checkvar(e.state.hash_var2,t)}},this.state.var2),s.a.createElement(y.Button,{size:"xl",level:"2",onClick:function(t){return e.checkvar(e.state.hash_var3,t)}},this.state.var3),s.a.createElement(y.Button,{size:"xl",level:"2",onClick:function(t){return e.checkvar(e.state.hash_var4,t)}},this.state.var4)))))),s.a.createElement(y.View,{id:"top",activePanel:"top",popout:this.state.popout},s.a.createElement(y.Panel,{id:"top"},s.a.createElement(y.PanelHeader,null,"\u0422\u041e\u041f"),s.a.createElement(y.Group,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0438\u0433\u0440\u043e\u043a\u043e\u0432"},console.log("toplist_array",a),console.log("toplist",this.state.top_list),a.length>0&&s.a.createElement(y.List,null,a.map(function(t,e){return s.a.createElement(y.Cell,{before:s.a.createElement(y.Avatar,null,s.a.createElement(S.a,null)),indicator:s.a.createElement(y.Counter,{type:"primary"},t.TOP)}," ",t.fname," ",t.lname," ")}))))))}}]),e}(s.a.Component));i.a.send("VKWebAppInit",{}),o.a.render(s.a.createElement(j,null),document.getElementById("root"))},71:function(t,e,a){t.exports=a(137)}},[[71,1,2]]]);
//# sourceMappingURL=main.0e1f4e6d.chunk.js.map